<grammar version="1.0" xml:lang="fr-FR" mode="voice"  root="rulescenariz" xmlns="http://www.w3.org/2001/06/grammar" tag-format="semantics/1.0">
	
	<!-- 
	<tag>
		timer=new Object();
	</tag>
	
	<rule id="Minute">
		<item  repeat="0-1">
			<one-of>
				<item>une<tag>timer.mn="01";</tag></item>
				<item>deux<tag>timer.mn="02";</tag></item>
				<item>trois<tag>timer.mn="03";</tag></item>
				<item>quatre<tag>timer.mn="04";</tag></item>
				<item>cinq<tag>timer.mn="05";</tag></item>
				<item>six<tag>timer.mn="06";</tag></item>
				<item>sept<tag>timer.mn="07";</tag></item>
				<item>huit<tag>timer.mn="08";</tag></item>
				<item>neuf<tag>timer.mn="09";</tag></item>
				<item>dix<tag>timer.mn="10";</tag></item>
				<item>onze<tag>timer.mn="11";</tag></item>
				<item>douze<tag>timer.mn="12";</tag></item>
				<item>treize<tag>timer.mn="13";</tag></item>
				<item>quatorze<tag>timer.mn="14";</tag></item>
				<item>quinze<tag>timer.mn="15";</tag></item>
				<item>seize<tag>timer.mn="16";</tag></item>
				<item>dix sept<tag>timer.mn="17";</tag></item>
				<item>dix huit<tag>timer.mn="18";</tag></item>
				<item>dix neuf<tag>timer.mn="19";</tag></item>
				<item>vingt<tag>timer.mn="20";</tag></item>
				<item>vingt et une<tag>timer.mn="21";</tag></item>
				<item>vingt deux<tag>timer.mn="22";</tag></item>
				<item>vingt trois<tag>timer.mn="23";</tag></item>
				<item>vingt quatre<tag>timer.mn="24";</tag></item>
				<item>vingt cinq<tag>timer.mn="25";</tag></item>
				<item>vingt six<tag>timer.mn="26";</tag></item>
				<item>vingt sept<tag>timer.mn="27";</tag></item>
				<item>vingt huit<tag>timer.mn="28";</tag></item>
				<item>vingt neuf<tag>timer.mn="29";</tag></item>
				<item>trente<tag>timer.mn="30";</tag></item>
				<item>trente et une<tag>timer.mn="31";</tag></item>
				<item>trente deux<tag>timer.mn="32";</tag></item>
				<item>trente trois<tag>timer.mn="33";</tag></item>
				<item>trente quatre<tag>timer.mn="34";</tag></item>
				<item>trente cinq<tag>timer.mn="35";</tag></item>
				<item>trente six<tag>timer.mn="36";</tag></item>
				<item>trente sept<tag>timer.mn="37";</tag></item>
				<item>trente huit<tag>timer.mn="38";</tag></item>
				<item>trente neuf<tag>timer.mn="39";</tag></item>
				<item>quarante<tag>timer.mn="40";</tag></item>
				<item>quarante et une<tag>timer.mn="41";</tag></item>
				<item>quarante deux<tag>timer.mn="42";</tag></item>
				<item>quarante trois<tag>timer.mn="43";</tag></item>
				<item>quarante quatre<tag>timer.mn="44";</tag></item>
				<item>quarante cinq<tag>timer.mn="45";</tag></item>
				<item>quarante six<tag>timer.mn="46";</tag></item>
				<item>quarante sept<tag>timer.mn="47";</tag></item>
				<item>quarante huit<tag>timer.mn="48";</tag></item>
				<item>quarante neuf<tag>timer.mn="49";</tag></item>
				<item>cinquante<tag>timer.mn="50";</tag></item>
				<item>cinquante et une<tag>timer.mn="51";</tag></item>
				<item>cinquante deux<tag>timer.mn="52";</tag></item>
				<item>cinquante trois<tag>timer.mn="53";</tag></item>
				<item>cinquante quatre<tag>timer.mn="54";</tag></item>
				<item>cinquante cinq<tag>timer.mn="55";</tag></item>
				<item>cinquante six<tag>timer.mn="56";</tag></item>
				<item>cinquante sept<tag>timer.mn="57";</tag></item>
				<item>cinquante huit<tag>timer.mn="58";</tag></item>
				<item>cinquante neuf<tag>timer.mn="59";</tag></item>
			</one-of>
		</item>
   </rule>
	
	<rule id="Hour">
		<item>a</item>
		<one-of>
			<item>une heure<tag>timer.hour="01";</tag></item>
			<item>deux heure<tag>test.hour="02";</tag></item>
			<item>trois heure<tag>timer.hour="03";</tag></item>
			<item>quatre heure<tag>timer.hour="04";</tag></item>
			<item>cinq heure<tag>timer.hour="05";</tag></item>
			<item>six heure<tag>timer.hour="06";</tag></item>
			<item>sept heure<tag>timer.hour="07";</tag></item>
			<item>huit heure<tag>timer.hour="08";</tag></item>
			<item>neuf heure<tag>timer.hour="09";</tag></item>
			<item>dix heure<tag>timer.hour="10";</tag></item>
			<item>onze heure<tag>timer.hour="11";</tag></item>
			<item>douze heure<tag>timer.hour="12";</tag></item>
			<item>treize heure<tag>timer.hour="13";</tag></item>
			<item>quatorze heure<tag>timer.hour="14";</tag></item>
			<item>quinze heure<tag>timer.hour="15";</tag></item>
			<item>seize heure<tag>timer.hour="16";</tag></item>
			<item>dix sept heure<tag>timer.hour="17";</tag></item>
			<item>dix huit heure<tag>timer.hour="18";</tag></item>
			<item>dix neuf heure<tag>timer.hour="19";</tag></item>
			<item>vingt heure<tag>timer.hour="20";</tag></item>
			<item>vingt et une heure<tag>timer.hour="21";</tag></item>
			<item>vingt deux heure<tag>timer.hour="22";</tag></item>
			<item>vingt trois heure<tag>timer.hour="23";</tag></item>
		</one-of>
   </rule>
	
	<rule id="WeekDay">
		<item  repeat="0-1">
			<one-of>
				<item>Aujourd'hui<tag>timer.day="today";</tag></item>
				<item>Demain<tag>timer.day="tomorrow";</tag></item>
				<item>Après demain<tag>timer.day="aftertomorrow";</tag></item>
				<item>Lundi<tag>timer.day="1000000";</tag></item>
				<item>Mardi<tag>timer.day="0100000";</tag></item>
				<item>Mercredi<tag>timer.day="0010000";</tag></item>
				<item>Jeudi<tag>timer.day="0001000";</tag></item>
				<item>Vendredi<tag>timer.day="0000100";</tag></item>
				<item>Samedi<tag>timer.day="0000010";</tag></item>
				<item>Dimanche<tag>timer.day="0000001";</tag></item>
			</one-of>
		</item>
   </rule>
	
    <rule id="StartTimer">
		<item  repeat="0-1">
			<one-of>
				<item>Met le</item>
				<item>Programme le</item>
			</one-of>
		</item>
		<item>chauffage</item>
		<ruleref uri="#WeekDay"/>
		<ruleref uri="#Hour"/>
		<ruleref uri="#Minute"/>
   </rule> 
   -->



  <rule id="rulescenariz">
    <tag>out.action=new Object()</tag>
	
	<item>Sarah</item>
	 
	<one-of>
		<!-- Gestion et modification des programmes, les programmes doivent exister-->		
		<item>gestion des programmes<tag>out.action.command="ManageCron"</tag></item>
		<item>Supprime tous les programmes<tag>out.action.command="RemoveAllCron"</tag></item>
	
		<item>Début de la démonstration<tag>out.action.tempo="5000";out.action.order="1";out.action.command="ScenarizCron";out.action.program="Démonstration";out.action.name="Phrase de début";out.action.clients="SALON";out.action.plug="scenariz";out.action.start="15:30-1111111";out.action.key="command=speech~text=Bonjour, je dois dire quelque chose au début du scénario."</tag></item>
        <item>La météo dans la démonstration<tag>out.action.tempo="10000";out.action.order="2";out.action.command="ScenarizCron";out.action.program="Démonstration";out.action.name="La météo";out.action.clients="SALON";out.action.plug="meteo";out.action.start="15:30-1111111";out.action.key="zip=315550~date=0";out.action.ttsCron="La %s"</tag></item>
        <item>L'heure dans la démonstration<tag>out.action.order="3";out.action.command="ScenarizCron";out.action.program="Démonstration";out.action.name="l'heure courante";out.action.clients="SALON";out.action.plug="scenariz";out.action.start="15:30-1111111";out.action.key="command=setTime";out.action.ttsCron="Il est %s"</tag></item>
		
		<item>fais nous une petite démo<tag>out.action.command="ExecCron";out.action.program="Démonstration"</tag></item>
		
		<!-- Exemple de scenario dynamique qui se détruit après exécution -->
		<!-- Appelle les rules au-dessus StartTimer, WeekDay, Hour, Minute -->
		<!-- Décommenter ces rules pour utiliser cette règle -->
		<!-- <item><ruleref uri="#StartTimer"/>
			<tag>
				if (timer.hour != undefined) {
					out.action.start = timer.hour  + ":";
					if (timer.mn != undefined)
						out.action.start = out.action.start + timer.mn + "-";
					else 
						out.action.start = out.action.start + "00-";
				   if (timer.day != undefined)
						out.action.start = out.action.start + timer.day;
					else 
						out.action.start = out.action.start + "today";
				} else 
					out.action.start = "noWay";
				out.action.command="ScenarizCron";
				out.action.clients="SARAH1";
				out.action.program="Chauffage dynamique";
				out.action.name="Chauffage dynamique à heure fixe";
				out.action.autodestroy="true";
				out.action.plug="OBLIGATOIRE! REPLACER PAR UN NOM DE PLUGIN";
				out.action.key="OPTIONNEL! REPLACER PAR LES CLES DU PLUGIN SINON SUPPRIMER LA LIGNE ENTIERE AVEC LE out.action.key";
				out.action.speechStartOnRecord="true";
			</tag>
		</item> -->
		
		
		<!-- AUTO WRITING - DO NOT REMOVE THIS LINE § -->
			
	    <!-- § AUTO WRITING - DO NOT REMOVE THIS LINE -->
		
	</one-of>
	
	<item repeat="0-1">
		<one-of>
			<item>dans dix minutes<tag>out.action.timeout="10";out.action._attributes.tts="D'accord, j'exécute le scénario dans 10 minutes"</tag></item>
			<item>dans quinze minutes<tag>out.action.timeout="15";out.action._attributes.tts="D'accord, j'exécute le scénario dans 15 minutes"</tag></item>
			<item>dans vingt minutes<tag>out.action.timeout="20";out.action._attributes.tts="D'accord, j'exécute le scénario dans 20 minutes"</tag></item>
			<item>dans vingt cinq minutes<tag>out.action.timeout="25";out.action._attributes.tts="D'accord, j'exécute le scénario dans 25 minutes"</tag></item>
			<item>dans trente minutes<tag>out.action.timeout="30";out.action._attributes.tts="D'accord, j'exécute le scénario dans 30 minutes"</tag></item>
			<item>dans quarante minutes<tag>out.action.timeout="40";out.action._attributes.tts="D'accord, j'exécute le scénario dans 40 minutes"</tag></item>
			<item>dans cinquante minutes<tag>out.action.timeout="50";out.action._attributes.tts="D'accord, j'exécute le scénario dans 50 minutes"</tag></item>
			<item>dans une heure<tag>out.action.timeout="60";out.action._attributes.tts="D'accord, j'exécute le scénario dans 1 heure"</tag></item>
			<item>dans une heure trente<tag>out.action.timeout="90";out.action._attributes.tts="D'accord, j'exécute le scénario dans 1 heure et demi"</tag></item>
			<item>dans deux heures<tag>out.action.timeout="120";out.action._attributes.tts="D'accord, j'exécute le scénario dans 2 heures"</tag></item>
		</one-of>
	</item> 
	
    <tag>out.action._attributes.uri="http://127.0.0.1:8080/sarah/scenariz"</tag>
  </rule>
</grammar>
